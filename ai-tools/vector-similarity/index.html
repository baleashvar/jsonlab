<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vector Similarity Calculator - Cosine Distance & Embeddings | JSONLab</title>
  <meta name="description" content="Professional vector similarity calculator. Compute cosine similarity, euclidean distance for embeddings. Essential for ML engineers and vector database optimization.">
  <link rel="canonical" href="https://jsonlab.xyz/ai-tools/vector-similarity/">
  <link rel="stylesheet" href="/src/css/styles.css">
</head>
<body class="flex flex-col h-screen">
  <header class="bg-white dark:bg-gray-800 shadow-sm">
    <nav class="max-w-7xl mx-auto px-4 h-14 flex items-center justify-between">
      <a href="/" class="flex items-center gap-2 font-bold">
        <svg class="w-6 h-6 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h2v2H7V7zm0 4h2v2H7v-2zm0 4h2v2H7v-2zm4-8h6v2h-6V7zm0 4h6v2h-6v-2zm0 4h6v2h-6v-2z"/></svg>
        JSONLab
      </a>
      <div class="flex items-center gap-4">
        <a href="/ai-tools/" class="text-gray-600 dark:text-gray-300 hover:text-blue-600">AI Tools</a>
        <a href="/" class="text-gray-600 dark:text-gray-300 hover:text-blue-600">JSON Tools</a>
      </div>
    </nav>
  </header>

  <main class="flex-1 flex flex-col overflow-hidden">
    <div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3">
      <h1 class="text-2xl font-bold">Vector Similarity Calculator for Embeddings</h1>
      <p class="text-sm text-gray-600 dark:text-gray-300 max-w-4xl mt-2">
        Calculate cosine similarity, euclidean distance, and dot product between vector embeddings. Critical tool for ML engineers testing similarity thresholds, optimizing retrieval systems, and validating embedding quality in production environments.
      </p>
    </div>

    <div class="flex-1 flex flex-col lg:flex-row overflow-hidden">
      <div class="flex-1 flex flex-col border-b lg:border-b-0 lg:border-r border-gray-200 dark:border-gray-700">
        <div class="px-4 py-2 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 text-sm font-medium">
          Vector A
        </div>
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
          <div class="flex gap-2 mb-2">
            <button id="preset-btn-a" class="px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded text-sm hover:bg-blue-200">Sample Vector</button>
            <button id="random-btn-a" class="px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm hover:bg-gray-200">Random</button>
            <select id="dimension-select" class="px-2 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded text-sm">
              <option value="3">3D</option>
              <option value="5">5D</option>
              <option value="10">10D</option>
              <option value="1536" selected>1536D (OpenAI)</option>
            </select>
          </div>
        </div>
        <textarea 
          id="vector-a" 
          class="flex-1 p-4 bg-white dark:bg-gray-800 dark:text-gray-200 resize-none focus:outline-none text-sm font-mono"
          placeholder="Enter vector A (comma-separated numbers)&#10;Example: 0.1, -0.2, 0.5, 0.8"
          spellcheck="false"
        ></textarea>
      </div>

      <div class="flex-1 flex flex-col border-b lg:border-b-0 lg:border-r border-gray-200 dark:border-gray-700">
        <div class="px-4 py-2 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 text-sm font-medium">
          Vector B
        </div>
        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
          <div class="flex gap-2">
            <button id="preset-btn-b" class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded text-sm hover:bg-green-200">Sample Vector</button>
            <button id="random-btn-b" class="px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm hover:bg-gray-200">Random</button>
          </div>
        </div>
        <textarea 
          id="vector-b" 
          class="flex-1 p-4 bg-white dark:bg-gray-800 dark:text-gray-200 resize-none focus:outline-none text-sm font-mono"
          placeholder="Enter vector B (comma-separated numbers)&#10;Example: 0.2, -0.1, 0.3, 0.9"
          spellcheck="false"
        ></textarea>
      </div>

      <div class="flex-1 flex flex-col">
        <div class="px-4 py-2 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 text-sm font-medium">
          Similarity Results
        </div>
        <div class="flex-1 p-4 bg-white dark:bg-gray-800 overflow-auto">
          <div class="space-y-4">
            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
              <div class="text-2xl font-bold text-blue-600 dark:text-blue-400" id="cosine-similarity">-</div>
              <div class="text-sm text-gray-600 dark:text-gray-300">Cosine Similarity</div>
              <div class="text-xs text-gray-500 mt-1">Range: -1 to 1 (1 = identical)</div>
            </div>
            
            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
              <div class="text-2xl font-bold text-green-600 dark:text-green-400" id="euclidean-distance">-</div>
              <div class="text-sm text-gray-600 dark:text-gray-300">Euclidean Distance</div>
              <div class="text-xs text-gray-500 mt-1">Range: 0 to âˆž (0 = identical)</div>
            </div>

            <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
              <div class="text-2xl font-bold text-purple-600 dark:text-purple-400" id="dot-product">-</div>
              <div class="text-sm text-gray-600 dark:text-gray-300">Dot Product</div>
              <div class="text-xs text-gray-500 mt-1">Raw similarity measure</div>
            </div>

            <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
              <h3 class="font-bold mb-2">Vector Info</h3>
              <div class="text-sm space-y-1">
                <div>Dimensions: <span id="vector-dimensions">-</span></div>
                <div>Vector A Magnitude: <span id="magnitude-a">-</span></div>
                <div>Vector B Magnitude: <span id="magnitude-b">-</span></div>
                <div id="similarity-interpretation" class="mt-2 p-2 rounded bg-white dark:bg-gray-600 text-xs"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-green-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700 p-4">
      <div class="text-center">
        <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Working with embeddings?</p>
        <div class="flex justify-center gap-4 text-sm">
          <a href="/ai-tools/token-calculator/" class="text-green-600 hover:underline">Calculate Costs â†’</a>
          <a href="/ai-tools/rag-chunking/" class="text-green-600 hover:underline">RAG Chunking â†’</a>
          <a href="/tools/formatter/" class="text-green-600 hover:underline">Format JSON â†’</a>
          <a href="/tools/python/" class="text-green-600 hover:underline">Python Compiler â†’</a>
        </div>
      </div>
    </div>
  </main>

  <script type="module">
    // Vector math functions
    function parseVector(text) {
      if (!text.trim()) return null;
      try {
        return text.split(',').map(x => parseFloat(x.trim())).filter(x => !isNaN(x));
      } catch (e) {
        return null;
      }
    }

    function dotProduct(a, b) {
      if (a.length !== b.length) return null;
      return a.reduce((sum, val, i) => sum + val * b[i], 0);
    }

    function magnitude(vector) {
      return Math.sqrt(vector.reduce((sum, val) => sum + val * val, 0));
    }

    function cosineSimilarity(a, b) {
      const dot = dotProduct(a, b);
      if (dot === null) return null;
      const magA = magnitude(a);
      const magB = magnitude(b);
      if (magA === 0 || magB === 0) return 0;
      return dot / (magA * magB);
    }

    function euclideanDistance(a, b) {
      if (a.length !== b.length) return null;
      return Math.sqrt(a.reduce((sum, val, i) => sum + Math.pow(val - b[i], 2), 0));
    }

    function generateRandomVector(dimensions) {
      return Array.from({length: dimensions}, () => (Math.random() - 0.5) * 2);
    }

    function getSampleVector(dimensions, type = 'a') {
      const samples = {
        3: type === 'a' ? [1, 0, 0] : [0.8, 0.6, 0],
        5: type === 'a' ? [1, 0.5, -0.2, 0.8, 0.1] : [0.9, 0.4, -0.1, 0.7, 0.2],
        10: type === 'a' ? [1, 0.5, -0.2, 0.8, 0.1, -0.3, 0.6, 0.2, -0.1, 0.4] : [0.9, 0.4, -0.1, 0.7, 0.2, -0.2, 0.5, 0.3, 0, 0.3],
        1536: generateRandomVector(1536)
      };
      return samples[dimensions] || generateRandomVector(dimensions);
    }

    const vectorA = document.getElementById('vector-a');
    const vectorB = document.getElementById('vector-b');
    const dimensionSelect = document.getElementById('dimension-select');
    const cosineSim = document.getElementById('cosine-similarity');
    const euclideanDist = document.getElementById('euclidean-distance');
    const dotProd = document.getElementById('dot-product');
    const vectorDims = document.getElementById('vector-dimensions');
    const magA = document.getElementById('magnitude-a');
    const magB = document.getElementById('magnitude-b');
    const interpretation = document.getElementById('similarity-interpretation');

    function updateCalculations() {
      const vecA = parseVector(vectorA.value);
      const vecB = parseVector(vectorB.value);

      if (!vecA || !vecB || vecA.length !== vecB.length) {
        cosineSim.textContent = '-';
        euclideanDist.textContent = '-';
        dotProd.textContent = '-';
        vectorDims.textContent = '-';
        magA.textContent = '-';
        magB.textContent = '-';
        interpretation.textContent = 'Enter valid vectors of equal dimensions';
        return;
      }

      const cosine = cosineSimilarity(vecA, vecB);
      const euclidean = euclideanDistance(vecA, vecB);
      const dot = dotProduct(vecA, vecB);
      const magAVal = magnitude(vecA);
      const magBVal = magnitude(vecB);

      cosineSim.textContent = cosine.toFixed(4);
      euclideanDist.textContent = euclidean.toFixed(4);
      dotProd.textContent = dot.toFixed(4);
      vectorDims.textContent = vecA.length;
      magA.textContent = magAVal.toFixed(4);
      magB.textContent = magBVal.toFixed(4);

      // Interpretation
      let interp = '';
      if (cosine > 0.9) interp = 'ðŸŸ¢ Very similar vectors';
      else if (cosine > 0.7) interp = 'ðŸŸ¡ Moderately similar vectors';
      else if (cosine > 0.3) interp = 'ðŸŸ  Somewhat similar vectors';
      else if (cosine > 0) interp = 'ðŸ”´ Slightly similar vectors';
      else if (cosine > -0.3) interp = 'ðŸ”´ Slightly dissimilar vectors';
      else interp = 'ðŸ”´ Very dissimilar vectors';
      
      interpretation.textContent = interp;

      // Save to localStorage
      localStorage.setItem('vectorCalc_a', vectorA.value);
      localStorage.setItem('vectorCalc_b', vectorB.value);
      localStorage.setItem('vectorCalc_dim', dimensionSelect.value);
    }

    // Event listeners
    vectorA.addEventListener('input', updateCalculations);
    vectorB.addEventListener('input', updateCalculations);

    document.getElementById('preset-btn-a').addEventListener('click', () => {
      const dim = parseInt(dimensionSelect.value);
      const sample = getSampleVector(dim, 'a');
      vectorA.value = sample.map(x => x.toFixed(4)).join(', ');
      updateCalculations();
    });

    document.getElementById('preset-btn-b').addEventListener('click', () => {
      const dim = parseInt(dimensionSelect.value);
      const sample = getSampleVector(dim, 'b');
      vectorB.value = sample.map(x => x.toFixed(4)).join(', ');
      updateCalculations();
    });

    document.getElementById('random-btn-a').addEventListener('click', () => {
      const dim = parseInt(dimensionSelect.value);
      const random = generateRandomVector(dim);
      vectorA.value = random.map(x => x.toFixed(4)).join(', ');
      updateCalculations();
    });

    document.getElementById('random-btn-b').addEventListener('click', () => {
      const dim = parseInt(dimensionSelect.value);
      const random = generateRandomVector(dim);
      vectorB.value = random.map(x => x.toFixed(4)).join(', ');
      updateCalculations();
    });

    dimensionSelect.addEventListener('change', () => {
      // Clear vectors when dimension changes
      vectorA.value = '';
      vectorB.value = '';
      updateCalculations();
    });

    // Load saved values
    const savedA = localStorage.getItem('vectorCalc_a');
    const savedB = localStorage.getItem('vectorCalc_b');
    const savedDim = localStorage.getItem('vectorCalc_dim');

    if (savedDim) dimensionSelect.value = savedDim;
    if (savedA) vectorA.value = savedA;
    if (savedB) vectorB.value = savedB;

    // Initial calculation or demo
    if (!vectorA.value && !vectorB.value) {
      const dim = parseInt(dimensionSelect.value);
      if (dim <= 10) {
        vectorA.value = getSampleVector(dim, 'a').map(x => x.toFixed(4)).join(', ');
        vectorB.value = getSampleVector(dim, 'b').map(x => x.toFixed(4)).join(', ');
      }
    }

    updateCalculations();
  </script>
</body>
</html>